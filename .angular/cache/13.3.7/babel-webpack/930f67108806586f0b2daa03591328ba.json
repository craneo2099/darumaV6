{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"src/app/providers/daruma-service/daruma.service\";\nimport * as i5 from \"@angular/common\";\n\nfunction FormularioDarumaPage_ion_item_21_ion_text_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-text\", 26)(1, \"p\");\n    i0.ɵɵtext(2, \" Campo requerido \");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction FormularioDarumaPage_ion_item_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\");\n    i0.ɵɵtemplate(1, FormularioDarumaPage_ion_item_21_ion_text_1_Template, 3, 0, \"ion-text\", 25);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.logdarumaForm.get(\"nombreDaruma\").hasError(\"required\"));\n  }\n}\n\nfunction FormularioDarumaPage_ion_item_27_ion_text_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-text\", 26)(1, \"p\");\n    i0.ɵɵtext(2, \" Campo requerido \");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction FormularioDarumaPage_ion_item_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\");\n    i0.ɵɵtemplate(1, FormularioDarumaPage_ion_item_27_ion_text_1_Template, 3, 0, \"ion-text\", 25);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.logdarumaForm.get(\"proposito\").hasError(\"required\"));\n  }\n}\n\nfunction FormularioDarumaPage_ion_footer_45_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-footer\", 27)(1, \"ion-grid\", 28)(2, \"ion-row\")(3, \"ion-col\", 29)(4, \"div\", 30)(5, \"small\");\n    i0.ɵɵtext(6, \"Powered by \");\n    i0.ɵɵelementStart(7, \"b\");\n    i0.ɵɵtext(8, \"Devstar Novatech.\");\n    i0.ɵɵelementEnd()()()()()()();\n  }\n}\n\nexport let FormularioDarumaPage = /*#__PURE__*/(() => {\n  class FormularioDarumaPage {\n    constructor(ngZone, router, formBuilder, alertCtrl, loadingCtrl, ds) {\n      this.ngZone = ngZone;\n      this.router = router;\n      this.formBuilder = formBuilder;\n      this.alertCtrl = alertCtrl;\n      this.loadingCtrl = loadingCtrl;\n      this.ds = ds;\n      this.isKeyboardHide = true;\n      this.logdarumaForm = this.formBuilder.group({\n        proposito: ['', Validators.compose([Validators.required])],\n        nombreDaruma: ['', Validators.compose([Validators.required])]\n      });\n    }\n\n    logdaruForm() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.loader = yield this.loadingCtrl.create();\n        yield this.loader.present();\n\n        if (this.logdarumaForm.get('proposito').hasError('required') || this.logdarumaForm.get('nombreDaruma').hasError('required')) {\n          // console.log(\"vacio\");\n          let titutlo = \"Error\";\n          let texto = \"Completa todos los campos\";\n          yield this.loader.dismiss();\n          this.doAlert(titutlo, texto);\n        } else {\n          // Sacar token y QR\n          // this.ds.getNewDaruma().then((newDaruma)=>{\n          // console.log(\"NewDarumaQr\",newDaruma[\"qrCode\"]);\n          // console.log(\"NewDarumatoken\",newDaruma[\"token\"]);\n          this.ds.isAsignaDaruma(this.newDaruma[\"qrCode\"], this.newDaruma[\"token\"]).subscribe(asigna => {\n            console.log(\"asigna\", asigna); // console.log(\"newDArumaAntesDe\",newDaruma)\n\n            this.ds.doActivaDaruma(this.newDaruma, this.logdarumaForm.value.proposito, this.logdarumaForm.value.nombreDaruma).subscribe(resActiva => __awaiter(this, void 0, void 0, function* () {\n              console.log(\"resActiva\", resActiva);\n              let result = resActiva[\"result\"];\n\n              if (result == 1) {\n                yield this.loader.dismiss();\n                this.doAlertConfirm(\"¡Exito!\", resActiva[\"message\"]);\n              } else {\n                yield this.loader.dismiss();\n                this.doAlertConfirm(\"¡¡¡Error!!!\", resActiva[\"message\"]);\n              }\n            }), error => {\n              console.log(\"Error doActivaDaruma\", error);\n            });\n          }, error => {\n            console.log(\"Error isAsignaDaruma\", error);\n          }); // }).catch((e: any) => console.log('Error is', e));\n        }\n      });\n    }\n\n    doAlert(titulo, texto) {\n      return __awaiter(this, void 0, void 0, function* () {\n        let alert = yield this.alertCtrl.create({\n          header: titulo,\n          subHeader: texto,\n          backdropDismiss: false,\n          buttons: [{\n            text: 'Ok',\n            handler: () => {}\n          }]\n        });\n        yield alert.present();\n      });\n    }\n\n    doAlertConfirm(titulo, texto) {\n      return __awaiter(this, void 0, void 0, function* () {\n        let alert = yield this.alertCtrl.create({\n          header: titulo,\n          subHeader: texto,\n          backdropDismiss: false,\n          buttons: [{\n            text: 'Ok',\n            handler: () => {\n              this.router.navigate(['darumas-gral']);\n            }\n          }]\n        });\n        yield alert.present();\n      });\n    }\n\n    ionViewWillEnter() {\n      window.addEventListener('keyboardWillHide', () => {\n        this.ngZone.run(() => {\n          this.isKeyboardHide = true;\n        }); // console.log('keyboard will hide', this.isKeyboardHide);\n      });\n      window.addEventListener('keyboardWillShow', e => {\n        this.ngZone.run(() => {\n          this.isKeyboardHide = false;\n        }); // console.log('keyboard will show with height', this.isKeyboardHide);\n      });\n    }\n\n    ngOnInit() {\n      this.fecha = Date.now(); // Sacar token y QR\n\n      this.ds.getNewDaruma().then(newDaruma => {\n        this.newDaruma = newDaruma;\n        let url = \"./../../../assets/imgs/colores/\";\n\n        if (newDaruma[\"color\"] == \"AZ\") {\n          this.imgDaruma = url + \"Darumas_azul_1\" + \".webp\";\n          this.altImg = \"Darumas_azul_1\";\n        } else if (newDaruma[\"color\"] == \"BL\") {\n          this.imgDaruma = url + \"Darumas_blanco_1\" + \".webp\";\n          this.altImg = \"Darumas_blanco_1\";\n        } else if (newDaruma[\"color\"] == \"DO\") {\n          this.imgDaruma = url + \"Darumas_dorado_1\" + \".webp\";\n          this.altImg = \"Darumas_dorado_1\";\n        } else if (newDaruma[\"color\"] == \"NA\") {\n          this.imgDaruma = url + \"Darumas_naranja_1\" + \".webp\";\n          this.altImg = \"Darumas_naranja_1\";\n        } else if (newDaruma[\"color\"] == \"NE\") {\n          this.imgDaruma = url + \"Darumas_negro_1\" + \".webp\";\n          this.altImg = \"Darumas_negro_1\";\n        } else if (newDaruma[\"color\"] == \"RS\") {\n          this.imgDaruma = url + \"Darumas_rosa_1\" + \".webp\";\n          this.altImg = \"Darumas_rosa_1\";\n        } else if (newDaruma[\"color\"] == \"VE\") {\n          this.imgDaruma = url + \"Darumas_verde_1\" + \".webp\";\n          this.altImg = \"Darumas_verde_1\";\n        } else if (newDaruma[\"color\"] == \"VI\") {\n          this.imgDaruma = url + \"Darumas_lila_1\" + \".webp\";\n          this.altImg = \"Darumas_lila_1\";\n        } else {\n          this.imgDaruma = url + \"Darumas_rojo_1\" + \".webp\";\n          this.altImg = \"Darumas_rojo_1\";\n        }\n      }).catch(e => console.log('getNewDaruma ', e));\n    }\n\n    ionViewWillLeave() {}\n\n  }\n\n  FormularioDarumaPage.ɵfac = function FormularioDarumaPage_Factory(t) {\n    return new (t || FormularioDarumaPage)(i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.AlertController), i0.ɵɵdirectiveInject(i3.LoadingController), i0.ɵɵdirectiveInject(i4.DarumaService));\n  };\n\n  FormularioDarumaPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: FormularioDarumaPage,\n    selectors: [[\"app-formulario-daruma\"]],\n    decls: 46,\n    vars: 12,\n    consts: [[\"slot\", \"start\"], [1, \"colorFondo\", \"ion-padding-vertical\"], [\"fixed\", \"true\", 1, \"ion-no-padding\"], [1, \"ion-no-padding\", 3, \"formGroup\", \"ngSubmit\"], [1, \"ion-justify-content-center\", \"ion-padding\"], [\"size\", \"10\", \"Size-md\", \"6\", 1, \"ion-justify-content-center\"], [1, \"noMostrarG\", 3, \"src\", \"alt\"], [1, \"noMostrarChico\", 3, \"src\", \"alt\"], [1, \"ion-justify-content-center\"], [\"size\", \"12\", \"size-md\", \"8\", 1, \"ion-no-padding\"], [1, \"ion-no-padding\", \"marginBottomM\"], [\"position\", \"floating\", \"color\", \"verde\"], [\"name\", \"add-circle-outline\"], [\"type\", \"text\", \"formControlName\", \"nombreDaruma\", \"clearInput\", \"true\", \"aria-required\", \"true\"], [4, \"ngIf\"], [\"type\", \"text\", \"formControlName\", \"proposito\", \"clearInput\", \"true\", \"aria-required\", \"true\"], [1, \"ion-justify-content-center\", \"ion-padding-horizontal\", \"marginBottomM\"], [\"size\", \"12\", \"size-md\", \"6\", 1, \"colorFondo\"], [\"size\", \"4\", 1, \"ion-justify-content-center\"], [\"color\", \"azul\"], [\"size\", \"8\", 1, \"ion-justify-content-center\"], [1, \"ion-justify-content-center\", \"ion-padding-horizontal\"], [\"type\", \"submit\", \"color\", \"rosados\", \"expand\", \"block\"], [\"slot\", \"start\", \"name\", \"checkmark-circle-outline\"], [\"class\", \"footerColor ion-no-border\", 4, \"ngIf\"], [\"color\", \"danger\", 4, \"ngIf\"], [\"color\", \"danger\"], [1, \"footerColor\", \"ion-no-border\"], [1, \"ion-no-padding\"], [\"size\", \"12\"], [1, \"ion-text-center\"]],\n    template: function FormularioDarumaPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-buttons\", 0);\n        i0.ɵɵelement(3, \"ion-back-button\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"ion-title\");\n        i0.ɵɵtext(5, \"Prop\\u00F3sito\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(6, \"ion-content\", 1)(7, \"ion-grid\", 2)(8, \"form\", 3);\n        i0.ɵɵlistener(\"ngSubmit\", function FormularioDarumaPage_Template_form_ngSubmit_8_listener() {\n          return ctx.logdaruForm();\n        });\n        i0.ɵɵelementStart(9, \"ion-row\", 4)(10, \"ion-col\", 5);\n        i0.ɵɵelement(11, \"img\", 6)(12, \"img\", 7);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(13, \"ion-row\", 8)(14, \"ion-col\", 9)(15, \"ion-list\", 10)(16, \"ion-item\")(17, \"ion-label\", 11);\n        i0.ɵɵelement(18, \"ion-icon\", 12);\n        i0.ɵɵtext(19, \" Dale nombre a tu Daruma \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(20, \"ion-input\", 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(21, FormularioDarumaPage_ion_item_21_Template, 2, 1, \"ion-item\", 14);\n        i0.ɵɵelementStart(22, \"ion-item\")(23, \"ion-label\", 11);\n        i0.ɵɵelement(24, \"ion-icon\", 12);\n        i0.ɵɵtext(25, \" Escribe tu prop\\u00F3sito: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(26, \"ion-input\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(27, FormularioDarumaPage_ion_item_27_Template, 2, 1, \"ion-item\", 14);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(28, \"ion-row\", 16)(29, \"ion-col\", 17)(30, \"ion-row\")(31, \"ion-col\", 18)(32, \"ion-text\", 19)(33, \"h6\")(34, \"b\");\n        i0.ɵɵtext(35, \"Fecha Inicio: \");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(36, \"ion-col\", 20)(37, \"h6\");\n        i0.ɵɵtext(38);\n        i0.ɵɵpipe(39, \"date\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(40, \"ion-row\", 21)(41, \"ion-col\", 17)(42, \"ion-button\", 22);\n        i0.ɵɵelement(43, \"ion-icon\", 23);\n        i0.ɵɵtext(44, \" Crear Daruma \");\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵtemplate(45, FormularioDarumaPage_ion_footer_45_Template, 9, 0, \"ion-footer\", 24);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"formGroup\", ctx.logdarumaForm);\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.imgDaruma, i0.ɵɵsanitizeUrl);\n        i0.ɵɵpropertyInterpolate(\"alt\", ctx.altImg);\n        i0.ɵɵadvance(1);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.imgDaruma, i0.ɵɵsanitizeUrl);\n        i0.ɵɵpropertyInterpolate(\"alt\", ctx.altImg);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngIf\", ctx.logdarumaForm.get(\"nombreDaruma\").errors && ctx.logdarumaForm.get(\"nombreDaruma\").dirty);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.logdarumaForm.get(\"proposito\").errors && ctx.logdarumaForm.get(\"proposito\").dirty);\n        i0.ɵɵadvance(11);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(39, 9, ctx.fecha, \"dd/MM/yyyy\"));\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngIf\", ctx.isKeyboardHide);\n      }\n    },\n    directives: [i3.IonHeader, i3.IonToolbar, i3.IonButtons, i3.IonBackButton, i3.IonBackButtonDelegate, i3.IonTitle, i3.IonContent, i3.IonGrid, i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.FormGroupDirective, i3.IonRow, i3.IonCol, i3.IonList, i3.IonItem, i3.IonLabel, i3.IonIcon, i3.IonInput, i3.TextValueAccessor, i2.NgControlStatus, i2.FormControlName, i5.NgIf, i3.IonText, i3.IonButton, i3.IonFooter],\n    pipes: [i5.DatePipe],\n    styles: [\"\"]\n  });\n  return FormularioDarumaPage;\n})();","map":null,"metadata":{},"sourceType":"module"}